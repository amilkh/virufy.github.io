(this.webpackJsonpelderly_care_app=this.webpackJsonpelderly_care_app||[]).push([[46],{192:function(e,t,n){"use strict";var r=n(6),o=n.n(r),a=n(206);t.a=function(){var e=o.a.useContext(a.a),t=e.title,n=e.setTitle,r=e.subtitle,c=e.setSubtitle,i=e.type,u=e.setType,s=e.logoSize,l=e.setLogoSize,f=e.setDoGoBack;return{title:t,setTitle:n,subtitle:r,setSubtitle:c,type:i,setType:u,logoSize:s,setLogoSize:l,doGoBack:e.doGoBack,setDoGoBack:f}}},193:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r=function(){window.scrollTo({top:0,behavior:"smooth"})}},194:function(e,t,n){"use strict";n.d(t,"a",(function(){return E})),n.d(t,"b",(function(){return y})),n.d(t,"c",(function(){return S})),n.d(t,"d",(function(){return h}));var r=n(188),o=n(190),a=n(6),c=function(e,t){var n=e.getItem(t);try{return n?JSON.parse(n):void 0}catch(r){return}};function i(e,t){var n=t||"__STATE_MACHINE__",r=c(e,n);return{set:function(e){r=e},get:function(){return r},getName:function(){return n}}}var u=function(e){return void 0===e};function s(e,t,n,r){"undefined"!==typeof window&&e&&(window.STATE_MACHINE_DEBUG=function(e){return t.setItem("___STATE_MACHINE_DEBUG__",e)},window.STATE_MACHINE_RESET=function(){return t.clear()},window.STATE_MACHINE_GET_STORE=function(){return t.getItem(n())},window.STATE_MACHINE_SAVE_TO=function(e){return window.localStorage.setItem(e,JSON.stringify(r()))},window.STATE_MACHINE_LOAD=function(e){var r=e.storeName,o=e.data;return t.setItem(n()||"___STATE_MACHINE_DEBUG__",o||window.localStorage.getItem(r)||"")})}var l=Object(a.createContext)({store:{},updateStore:function(e){return e}}),f=function(e){var t=e.transform,n=e.externalStoreName,r=e.storageType,o=e.store;return t({externalStoreData:c(r,n),currentStoreData:o})};function d(e,t,n){var a=e,i=t.syncStores;if(!i)return a;try{if(Array.isArray(i))i.forEach((function(e){a=f({transform:e.transform,externalStoreName:e.externalStoreName,storageType:n,store:a})}));else{if(i.externalStoreName&&"function"===typeof i.transform&&"string"===typeof i.externalStoreName)return f({transform:i.transform,externalStoreName:i.externalStoreName,storageType:n,store:a});Object.entries(i).forEach((function(e){var t=Object(o.a)(e,2),i=t[0],u=t[1],s=c(n,i);u.forEach((function(e){a=Object.assign(Object.assign({},a),Object(r.a)({},e,Object.assign(Object.assign({},a[e]),s[e])))}))}))}}catch(u){return a}return a}var p,m,b,v="undefined"!==typeof window,g=v?window.sessionStorage:{getItem:function(e){return e},setItem:function(e){return e},clear:function(){},length:0,key:function(e){return e.toString()},removeItem:function(){}},O=[];function S(e){g=e}function y(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{name:"__STATE_MACHINE__",middleWares:[],syncStores:void 0},n=t?t.name:"__STATE_MACHINE__",r=i(g,n);b=r.getName,p=r.get,m=r.set,O=t.middleWares,s(!1,g,b,p),m(d(p()||e,t,g))}function E(e){var t=Object(a.useState)(p()),n=Object(o.a)(t,2),r=n[0],c=n[1],i=Object(a.useMemo)((function(){return{store:r,updateStore:c}}),[r]);return Object(a.createElement)(l.Provider,Object.assign({value:i},e))}var j=function(e){var t=e.options,n=e.callback,r=e.updateStore;return function(e){var o;n&&n.name;if(n&&(o=n(p(),e)),m(u(o)?p():o),g.setItem(b(),JSON.stringify(p())),u(t)||t&&!1!==t.shouldReRenderApp){var a=p();Array.isArray(O)&&O.length&&(a=O.reduce((function(e,t){return t(e)||e}),a)),r(a)}}};function h(e,t){var n=Object(a.useContext)(l),c=n.store,i=n.updateStore;return e&&Object.keys(e).length?{actions:Object.entries(e).reduce((function(e,n){var c=Object(o.a)(n,2),u=c[0],s=c[1];return Object.assign(Object.assign({},e),Object(r.a)({},u,Object(a.useCallback)(j({options:t,callback:s,updateStore:i}),[])))}),{}),action:function(e){return e},state:c}:{actions:{},action:Object(a.useCallback)(e?j({options:t,callback:e,updateStore:i}):function(){},[]),state:c}}},208:function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var r=n(6),o=n.n(r);function a(){return(a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function c(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var i=o.a.createElement("path",{d:"M13.983,0C6.261,0,0.001,6.259,0.001,13.979c0,7.724,6.26,13.984,13.982,13.984s13.98-6.261,13.98-13.984C27.963,6.259,21.705,0,13.983,0z M13.983,26.531c-6.933,0-12.55-5.62-12.55-12.553c0-6.93,5.617-12.548,12.55-12.548c6.931,0,12.549,5.618,12.549,12.548C26.531,20.911,20.913,26.531,13.983,26.531z"}),u=o.a.createElement("polygon",{points:"15.579,17.158 16.191,4.579 11.804,4.579 12.414,17.158"}),s=o.a.createElement("path",{d:"M13.998,18.546c-1.471,0-2.5,1.029-2.5,2.526c0,1.443,0.999,2.528,2.444,2.528h0.056c1.499,0,2.469-1.085,2.469-2.528C16.441,19.575,15.468,18.546,13.998,18.546z"}),l=function(e){var t=e.svgRef,n=e.title,r=c(e,["svgRef","title"]);return o.a.createElement("svg",a({width:"24px",height:"24px",viewBox:"0 0 27.963 27.963",fill:"none",ref:t},r),n?o.a.createElement("title",null,n):null,i,u,s)},f=o.a.forwardRef((function(e,t){return o.a.createElement(l,a({svgRef:t},e))}));n.p},209:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(6),o=n.n(r),a=n(200),c=function(){return(c=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};var i=function(e){var t=e.as,n=e.errors,r=e.name,i=e.message,u=e.render,s=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}(e,["as","errors","name","message","render"]),l=Object(a.f)(),f=Object(a.c)(n||l.errors,r);if(!f)return null;var d=f.message,p=f.types,m=c(c({},s),{children:d||i});return t?o.a.isValidElement(t)?o.a.cloneElement(t,m):o.a.createElement(t,m):u?u({message:d||i,messages:p}):o.a.createElement(o.a.Fragment,c({},m))}},290:function(e,t,n){"use strict";n.r(t);var r=n(198),o=n.n(r),a=n(199),c=n(190),i=n(6),u=n.n(i),s=n(213),l=n(194),f=n(209),d=n(208),p=n(193),m=n(192),b=n(334),v=function(e){return new Promise((function(t,n){var r=new FileReader;r.readAsDataURL(e),r.onload=function(){return t(r.result.split(",")[1])},r.onerror=function(e){return n(e)}}))};t.default=u.a.memo((function(e){var t=Object(i.useState)(!0),n=Object(c.a)(t,2)[1],r=Object(m.a)(),g=r.setDoGoBack,O=r.setTitle,S=r.setType,y=Object(l.d)().state,E=Object(s.g)(),j=u.a.useState(null),h=Object(c.a)(j,2),_=h[0],w=h[1],T=Object(i.useCallback)(Object(a.a)(o.a.mark((function t(){var n,r,a,c,i,u,s,l,f,d,p,m,b,g,O,S;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,m={patientId:null===(n=y.welcome)||void 0===n?void 0:n.patientId,location:null===(r=y.welcome)||void 0===r?void 0:r.location,facility:null===(a=y.welcome)||void 0===a?void 0:a.facility,ageGroup:null===(c=y["submit-steps"])||void 0===c?void 0:c.ageGroup,biologicalSex:null===(i=y["submit-steps"])||void 0===i?void 0:i.biologicalSex,currentSymptoms:null===(u=y["submit-steps"])||void 0===u?void 0:u.currentSymptoms,currentMedicalCondition:null===(s=y["submit-steps"])||void 0===s?void 0:s.currentMedicalCondition},!((b=(null===(l=y["submit-steps"])||void 0===l||null===(f=l.recordYourCough)||void 0===f?void 0:f.recordingFile)||(null===(d=y["submit-steps"])||void 0===d||null===(p=d.recordYourCough)||void 0===p?void 0:p.uploadedFile))instanceof Blob)){t.next=9;break}return t.next=6,v(b);case 6:t.t0=t.sent,t.next=10;break;case 9:t.t0=null;case 10:return g=t.t0,t.next=13,fetch("https://ydw26ea8a8.execute-api.us-east-1.amazonaws.com/prod/elderly-care-lambda",{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({structuredData:m,coughFile:g})});case 13:return O=t.sent,t.next=16,O.json();case 16:S=t.sent,console.log("Response:",S),e.nextStep&&E.push(e.nextStep),t.next=25;break;case 21:t.prev=21,t.t1=t.catch(0),console.error("Error sending data: Failed to send data."),w("Failed to send data.");case 25:case"end":return t.stop()}}),t,null,[[0,21]])}))),[y,E,e.nextStep]),x=Object(i.useCallback)((function(){e.previousStep?(n(!1),E.push(e.previousStep)):E.goBack()}),[]),A=Object(i.useCallback)((function(){console.log("MOCK: sending to backend"),console.log("State Info:",y),setTimeout((function(){e.nextStep&&E.push(e.nextStep)}),2e3)}),[y,E,e.nextStep]);return Object(i.useEffect)((function(){Object(p.a)(),O(""),S("tertiary"),g(null),T()}),[x,g,O,S,T,A]),u.a.createElement(u.a.Fragment,null,u.a.createElement("h1",{style:{marginTop:"50px",marginLeft:"auto",marginRight:"auto"}},"\u9001\u4fe1\u4e2d..."),u.a.createElement(b.ImageProcessing,null),_&&u.a.createElement(f.a,{errors:{error:_},name:"error",render:function(){return u.a.createElement(b.TextErrorContainer,null,u.a.createElement(d.a,null),_)}}))}))}}]);
//# sourceMappingURL=46.e106b1f3.chunk.js.map